<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="IMiWiXjV0qaBBoJareXafpb0CY_7Zq3PzrZMufjHQBA" />
    <meta property="og:title" content="Envidia Copas - Sevilla Santa Justa" />
    <meta property="og:description" content="Vive la noche sevillana frente a Santa Justa con cócteles, tapas, desayunos, juegos y eventos únicos." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" />
    <meta name="author" content="Bar Envidia" />
    <meta name="keywords" content="bar, Sevilla, Santa Justa, cócteles, tapas, desayunos, futbolín, dardos, eventos" />
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BarOrPub",
            "name": "Envidia Copas",
            "address": {
                "@type": "PostalAddress",
                "streetAddress": "C. Juan Antonio Cavestany, 25",
                "addressLocality": "Sevilla",
                "postalCode": "41003",
                "addressCountry": "ES"
            },
            "geo": {
                "@type": "GeoCoordinates",
                "latitude": 37.390415,
                "longitude": -5.974863
            },
            "url": "https://www.envidiacopas.com",
            "telephone": "+34-123-456-789",
            "openingHoursSpecification": [
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": ["Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                    "opens": "16:00",
                    "closes": "02:00"
                },
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Sunday",
                    "opens": "15:00",
                    "closes": "22:00"
                }
            ]
        }
    </script>
    <title>Envidia Copas - Sevilla Santa Justa</title>
    <link rel="icon" href="https://raw.githubusercontent.com/WhitiXD/Whiti/master/copa1-ia.png">
    <!-- Google Fonts: Montserrat, Lora, Dancing Script -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Lora:wght@700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone@7.25.7/babel.min.js"></script>
    <!-- GSAP for animations -->
    <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
    <!-- Howler.js for audio -->
    <script src="https://unpkg.com/howler@2.2.4/dist/howler.min.js"></script>
    <!-- Mapbox -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet" />
    <style>
        body {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            font-family: 'Montserrat', sans-serif;
            color: #ffffff;
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
        }
        body.light-mode {
            background: linear-gradient(180deg, #f8f1e9 0%, #e2c2b9 100%);
            color: #1e293b;
        }
        .parallax-hero {
            position: relative;
            height: 100vh;
            overflow: hidden;
        }
        .parallax-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }
        .parallax-bg {
            background-image: url('https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            transform: translateY(0);
        }
        .parallax-cocktail {
            background-image: url('https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center 70%;
            transform: translateY(20px);
            animation: shake 5s ease-in-out infinite;
        }
        @keyframes shake {
            0%, 100% { transform: translateY(20px) rotate(0deg); }
            50% { transform: translateY(20px) rotate(2deg); }
        }
        .parallax-smoke {
            background-image: url('https://images.unsplash.com/photo-1518481852452-817f0d1a2d3a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            opacity: 0.3;
            transform: translateY(10px);
        }
        .firefly {
            position: absolute;
            width: 5px;
            height: 5px;
            background: #f59f00;
            border-radius: 50%;
            box-shadow: 0 0 10px #f59f00;
            animation: firefly 3s infinite;
        }
        @keyframes firefly {
            0% { opacity: 0.2; transform: translate(0, 0); }
            50% { opacity: 1; }
            100% { opacity: 0.2; transform: translate(20px, -20px); }
        }
        .expanded-image-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        .expanded-image {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            border-radius: 16px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
        }
        .modal {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
        }
        .nav-link {
            position: relative;
            padding-bottom: 4px;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: #f59f00;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .carousel-item {
            transition: transform 0.3s ease;
            transform-style: preserve-3d;
        }
        .carousel-item:hover {
            transform: rotateY(10deg);
        }
        .animate-section {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 1s ease, transform 1s ease;
        }
        .animate-section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .game-canvas {
            border: 2px solid #f59f00;
            border-radius: 10px;
            background: radial-gradient(circle, #2d3748 0%, #1e293b 100%);
        }
        .button-primary {
            background-color: #d97706;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .button-primary:hover {
            background-color: #b45309;
            transform: translateY(-3px);
        }
        .tapas-plate {
            background-image: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: 100% 100%;
            animation: slidePlate 1.5s ease-in-out;
        }
        @keyframes slidePlate {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .error-boundary {
            padding: 20px;
            background: #7f1d1d;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            margin: 20px auto;
            max-width: 600px;
        }
        .story-slide {
            transition: transform 0.5s ease;
        }
        .story-slide.active {
            transform: scale(1.1);
            z-index: 10;
        }
        .reservation-form input, .reservation-form select {
            transition: border-color 0.3s ease;
        }
        .reservation-form input:focus, .reservation-form select:focus {
            border-color: #f59f00;
            outline: none;
        }
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .audio-toggle {
            position: fixed;
            top: 60px;
            right: 20px;
            z-index: 1000;
        }
        .tooltip {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .tooltip:hover {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const menuData = {
            "Desayunos y Otros": [
                { name: "A.O.V. - Tulupón (Media)", price: 1.20, note: "", image: "https://images.unsplash.com/photo-1528731708534-81627959f071?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "200 kcal" },
                { name: "A.O.V. - Tulupón (Entera)", price: 1.50, note: "", image: "https://images.unsplash.com/photo-1528731708534-81627959f071?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "300 kcal" },
                { name: "Pan con Sobrasada", price: 1.20, note: "", image: "https://images.unsplash.com/photo-1599948128020-39c3b3a222d6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "250 kcal" },
                { name: "Pan con Jamón York", price: 1.30, note: "", image: "https://images.unsplash.com/photo-1506976785307-8738b0575631?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "220 kcal" },
                { name: "Manteca de Lomo Colorá", price: 1.70, note: "", image: "https://images.unsplash.com/photo-1606851134945-9667bf058c79?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "280 kcal" },
                { name: "A.O.V. y Tomate", price: 1.30, note: "", image: "https://images.unsplash.com/photo-1541518763669-2fefb165afcc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "210 kcal" },
                { name: "A.O.V. y Salmorejo", price: 1.70, note: "", image: "https://images.unsplash.com/photo-1627308594196-4b0f180aec63?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "240 kcal" },
                { name: "Porción Mantequilla y Mermelada", price: 1.60, note: "", image: "https://images.unsplash.com/photo-1559561843-297a373e4142?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "300 kcal" },
                { name: "A.O.V. y Pavo", price: 1.60, note: "", image: "https://images.unsplash.com/photo-1506976785307-8738b0575631?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "200 kcal" },
                { name: "A.O.V. y Jamón York", price: 1.90, note: "", image: "https://images.unsplash.com/photo-1506976785307-8738b0575631?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "230 kcal" },
                { name: "Jamón, A.O.V. y Tomate (Media)", price: 1.60, note: "", image: "https://images.unsplash.com/photo-1541518763669-2fefb165afcc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "220 kcal" },
                { name: "Jamón, A.O.V. y Tomate (Entera)", price: 1.90, note: "", image: "https://images.unsplash.com/photo-1541518763669-2fefb165afcc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "260 kcal" },
                { name: "Jamón con A.O.V.", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1506976785307-8738b0575631?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "270 kcal" },
                { name: "Lomo Asado con Sal y Miel", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1606851134945-9667bf058c79?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "290 kcal" },
                { name: "Tortilla de Patatas (sin Whisky)", price: 2.60, note: "", image: "https://images.unsplash.com/photo-1551326844-4f64c879b9c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "320 kcal" },
                { name: "Pringá", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1606851134945-9667bf058c79?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "300 kcal" },
                { name: "Torta del Casar", price: 2.50, note: "", image: "https://images.unsplash.com/photo-1506976785307-8738b0575631?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "350 kcal" },
                { name: "Jamón y Queso Curado", price: 2.50, note: "", image: "https://images.unsplash.com/photo-1506976785307-8738b0575631?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "340 kcal" },
                { name: "Chorizo y Queso Curado", price: 3.00, note: "", image: "https://images.unsplash.com/photo-1606851134945-9667bf058c79?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "360 kcal" },
                { name: "Huevos, Bacon, Lomo, Queso, Zumo y Café", price: 6.00, note: "", image: "https://images.unsplash.com/photo-1525351484163-7522494f2660?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "600 kcal" },
                { name: "Café / Infusiones", price: 1.30, note: "", image: "https://images.unsplash.com/photo-1512568400610-5978aa9e263b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "10 kcal" },
                { name: "Infusiones Especiales", price: 1.70, note: "", image: "https://images.unsplash.com/photo-1512568400610-5978aa9e263b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "15 kcal" },
                { name: "Carajillo", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1512568400610-5978aa9e263b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "100 kcal" },
                { name: "Café Bombón", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1512568400610-5978aa9e263b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "150 kcal" },
                { name: "Zumo Minute Maid", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1613478223719-2e78e2a78e24?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "120 kcal" },
                { name: "Batidos Normales", price: 1.80, note: "", image: "https://images.unsplash.com/photo-1504382262782-5b4ece78642b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "200 kcal" },
                { name: "Zumo Natural de Naranja", price: 1.80, note: "", image: "https://images.unsplash.com/photo-1613478223719-2e78e2a78e24?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "110 kcal" },
                { name: "Refrescos (Aquarius, Nestea)", price: 2.50, note: "", image: "https://images.unsplash.com/photo-1603991482950-796833f0dd87?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "150 kcal" },
                { name: "Agua", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1603991482950-796833f0dd87?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "0 kcal" },
                { name: "Chupitos (Terry, Magno, Anís / 'Jani')", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1514361109680-d8b5626f6723?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "80 kcal" },
                { name: "Madreño", price: 2.00, note: "", image: "https://images.unsplash.com/photo-1514361109680-d8b5626f6723?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "90 kcal" }
            ],
            "Postres y Helados": [
                { name: "Copa Tricolor (3 Bolas a Elegir)", price: 7.50, note: "", image: "https://images.unsplash.com/photo-1516043827470-1f2e8e7b1d08?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "450 kcal" },
                { name: "Copa 3 Bolas a Elegir", price: 5.50, note: "", image: "https://images.unsplash.com/photo-1516043827470-1f2e8e7b1d08?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "400 kcal" },
                { name: "Copa 1 Bola a Elegir", price: 3.50, note: "", image: "https://images.unsplash.com/photo-1497034825429-c343d7c6a68f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "150 kcal" },
                { name: "Batidos Normales", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1504382262782-5b4ece78642b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "350 kcal" },
                { name: "Gofre con Chocolate y Nata", price: 4.00, note: "+1€ con helado", image: "https://images.unsplash.com/photo-1507325655130-762-4cd74cb0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
                { name: "Crepe con Chocolate y Nata", price: 5.00, note: "+1€ con helado", image: "https://images.unsplash.com/photo-1484982498542-8f0f6f08d1c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
                { name: "Pancakes con Sirope, Nata y Helado", price: 6.50, note: "", image: "https://images.unsplash.com/photo-1528207776546-365bb710ee93?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
                { name: "Pancakes con Sirope de Nutella y Nata", price: 5.00, note: "https://images.unsplash.com/photo-1528207776546-365bb710ee93?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "500 kcal" }
            ],
            "Smoothies": [
                { name: "Peach Paradise (Melocotón, Papaya y Fresa)", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1505252585461-04db1eb84625?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "250 kcal" },
                { name: "Triple M (Mango, Melón y Maracuyá)", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1504382262782-5b4ece78642b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "260 kcal" },
                { name: "Berry Dream (Fresa, Frambuesa y Arándanos)", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1505252585461-04db1eb84625?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "240 kcal" },
                { name: "Piña Colada (Piña y Coco)", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1600700931-4dd932f87119?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "270 kcal" },
                { name: "Red Banana (Fresa y Plátano)", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1505252585461-04db1eb84625?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "260 kcal" },
                { name: "Tropic Mix (Piña, Papaya, Mango)", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1504382262782-5b4ece78642b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "255 kcal" },
                { name: "Para Llevar", price: 5.00, note: "Listos para llevar", image: "https://images.unsplash.com/photo-1504382262782-5b4ece78642b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "260 kcal" }
            ],
            "Helados - Formatos": [
                { name: "Vasito Grande (Artesano)", price: 5.50, note: "", image: "https://images.unsplash.com/photo-1560008581-09826d1de4f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "400 kcal" },
                { name: "Cono Grande (Artesano)", price: 4.50, note: "", image: "https://images.unsplash.com/photo-1497034825429-c343d7c6a68f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "350 kcal" },
                { name: "Cono Mediano (Segunda Opción)", price: 3.50, note: "", image: "https://images.unsplash.com/photo-1497034825429-c343d7c6a68f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "300 kcal" },
                { name: "Vasito Pequeño", price: 3.00, note: "", image: "https://images.unsplash.com/photo-1560008581-09826d1de4f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "200 kcal" }
            ],
            "Cócteles con Alcohol": [
                { name: "Bloody Mary", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1561131526-f791888a83b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "180 kcal" },
                { name: "San Francisco", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1600700931-4dd932f87119?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "200 kcal" },
                { name: "Mojito", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1551538827-44c3755b8532?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "220 kcal" },
                { name: "Caipirinha", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1551538827-44c3755b8532?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "210 kcal" },
                { name: "Martini Dry", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1588650438710-d8b5626f6723?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "190 kcal" },
                { name: "Red Lion", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1600700931-4dd932f87119?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "230 kcal" },
                { name: "Piña Colada", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1600700931-4dd932f87119?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "250 kcal" },
                { name: "Gin Gimlet", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1514361109680-d8b5626f6723?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "200 kcal" },
                { name: "Gin Fizz", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1514361109680-d8b5626f6723?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "210 kcal" },
                { name: "Margarita", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1588650432184-64b8a90e09b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "220 kcal" },
                { name: "Daiquiri", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1600700931-4dd932f87119?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "230 kcal" },
                { name: "Cosmopolitan", price: 9.00, note: "", image: "https://images.unsplash.com/photo-1588650432184-64b8a90e09b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "200 kcal" }
            ],
            "Cócteles sin Alcohol": [
                { name: "Cóctel sin Alcohol", price: 7.50, note: "", image: "https://images.unsplash.com/photo-1600700931-4dd932f87119?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", nutrition: "150 kcal" }
            ]
        };

        // Error Boundary
        class ErrorBoundary extends React.Component {
            state = { hasError: false, error: null };

            static getDerivedStateFromError(error) {
                return { hasError: true, error };
            }

            render() {
                if (this.state.hasError) {
                    return (
                        <div className="error-boundary">
                            <h2>Algo salió mal.</h2>
                            <p>{this.state.error?.message || 'Error desconocido.'}</p>
                            <p>Por favor, recarga la página o contacta con soporte.</p>
                        </div>
                    );
                }
                return this.props.children;
            }
        }

        function MenuModal({ isOpen, onClose }) {
            const [selectedCategory, setSelectedCategory] = React.useState("all");
            const [searchTerm, setSearchTerm] = React.useState("");
            const [favorites, setFavorites] = React.useState(JSON.parse(localStorage.getItem('favorites')) || []);

            const toggleFavorite = (item, category) => {
                const id = `${category}-${item.name}`;
                let updatedFavorites;
                if (favorites.includes(id)) {
                    updatedFavorites = favorites.filter(fav => fav !== id);
                } else {
                    updatedFavorites = [...favorites, id];
                }
                setFavorites(updatedFavorites);
                localStorage.setItem('favorites', JSON.stringify(updatedFavorites));
            };

            if (!isOpen) return null;

            const categories = ["all", ...Object.keys(menuData)];
            const filteredItems = Object.entries(menuData).flatMap(([category, items]) =>
                (selectedCategory === "all" || selectedCategory === category)
                    ? items.filter(item =>
                        item.name.toLowerCase().includes(searchTerm.toLowerCase())
                    ).map(item => ({ ...item, category }))
                    : []
            );

            return (
                <div className="fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50">
                    <div className="bg-white text-gray-900 rounded-3xl p-12 w-full max-w-6xl h-[85vh] overflow-y-auto modal light-content">
                        <div className="flex justify-between items-center mb-10">
                            <h2 className="text-4xl font-bold text-amber-600 font-['Lora']">Explora Nuestra Carta</h2>
                            <button onClick={onClose} className="text-gray-600 hover:text-gray-900 text-4xl transition" aria-label="Cerrar carta">×</button>
                        </div>
                        <div className="mb-8">
                            <input
                                type="text"
                                placeholder="Buscar producto..."
                                className="w-full p-4 rounded-lg bg-gray-100 text-gray-900 border border-gray-300 focus:border-amber-600 transition text-lg"
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                aria-label="Buscar en la carta"
                            />
                        </div>
                        <div className="flex flex-wrap gap-3 mb-8">
                            {categories.map(category => (
                                <button
                                    key={category}
                                    onClick={() => setSelectedCategory(category)}
                                    className={`px-6 py-2 rounded-full font-semibold text-base transition ${selectedCategory === category ? 'bg-amber-600 text-white' : 'bg-gray-200 text-gray-900 hover:bg-gray-300'}`}
                                    aria-label="Filtrar por ${category === "all" ? "Todos" : category}
                                >
                                    {category === "all" ? "Todos" : category}
                                </button>
                            ))}
                        </div>
                        {filteredItems.length === 0 ? (
                            <p className="text-center text-gray-600 text-lg">No se encontraron productos.</p>
                        ) : (
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredItems.map((item, index) => (
                                    <div key={index} className="bg-gray-100 rounded-xl overflow-hidden">
                                        <img
                                            src={item.image}
                                            alt={item.name}
                                            className="w-full h-60 object-cover cursor-pointer lazy-img"}
                                            onClick={() => expandImage({ src: item.image })}
                                            loading="lazy"
                                        />
                                        <div className="p-6">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="text-xl font-semibold text-gray-900">{item.name}</h3>
                                                <button
                                                    onClick={() => toggleFavorite(item, item.category)}
                                                    className={`fas fa-heart text-2xl} ${favorites.includes(`${item.category}-${item.name}`) ? 'text-red-600' : 'text-gray-400'}`}
                                                    aria-label={favorites.includes(`${item.category}-${item.name}`) ? 'Eliminar de favoritos' : 'Añadir a favoritos'}
                                                ></button>
                                            </div>
                                            <p className="text-amber-600 font-bold text-lg">{item.price.toFixed(2)}€</p>
                                            {item.note && <p className="text-sm text-gray-500 mt-2">{item.note}</p>}
                                            <p className="text-xs text-gray-400 mt-3">{item.category}</p>
                                            <div className="relative group">
                                                <span className="text-sm text-gray-600">Nutrición: {item.nutrition}</span>
                                                <div className="tooltip absolute bg-gray-800 text-white text-xs p-2 rounded-lg -top-10 left-0 opacity-0 invisible">
                                                    Información nutricional aproximada por porción.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                        </div>
                    </div>
                </div>
            );
        }

        function VirtualTour() {
            const images = [
                "https://images.unsplash.com/photo-1577906096429-f73c2c312435?ixlib=rb-4.0.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1552566626-52f8b828add9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1514933651103-3d3d1e803c66?ixlib=rb-4.0.0.3&auto=format&fit=crop&w=800&q=80"
            ];
            const [currentImage, setCurrentImage] = React.useState(0);

            React.useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentImage(prev => (prev + 1) % images.length);
                }, 5000);
                return () => clearInterval(interval);
            }, []);

            return (
                <section id="tour" className="py-24 text-center bg-gray-900 light:bg-gray-100 animate-section">
                    <h2 className="text-4xl md:text-5xl font-bold mb-8 text-amber-400 light:text-amber-600 font-['Dancing Script']">Tour Virtual 🌌</h2>
                    <p className="text-lg md:text-xl max-w-3xl mx-auto mb-10 light-text">
                        Explora Envidia Copas desde casa con nuestro tour virtual interactivo.
                    </p>
                    <div className="relative w-full max-w-4xl mx-auto h-[500px] rounded-xl overflow-hidden">
                        {images.map((image, index) => (
                            <img
                                key={index}
                                src={image}
                                alt={Interior slide ${index + 1}`}
                                className={`w-full h-full object-cover absolute transition-opacity duration-1000 ${index === currentImage ? 'opacity-100' : 'opacity-0'}`}
                                loading="lazy"
                            />
                        ))}
                        <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
                            {images.map((_, index) => (
                                <button
                                    key={index}
                                    className={`w-3 h-3 rounded-full ${index === currentImage ? 'bg-amber-400' : 'bg-gray-400'}`}
                                    onClick={() => setCurrentImage(index)}
                                    aria-label={Ir a la imagen ${index + 1}`}
                                ></button>
                            ))}
                        </div>
                    </div>
                </section>
            );
        }

        function CocktailMixer() {
            const canvasRef = React.useRef(null);
            const [cocktail, setCocktail] = React.useState([]);
            const ingredients = [
                { name: "Ron", color: "#f59f00", img: "https://images.unsplash.com/photo-1514361109680-d8b5626f6723?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" },
                { name: "Menta", color: "#16a34a", img: "https://images.unsplash.com/photo-1551538827-44c3755b8532?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" },
                { name: "Limón", color: "#a3e635", img: "https://images.unsplash.com/photo-1588650432184-64b8a90e09b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" },
                { name: "Soda", color: "#38bdf8", img: "https://images.unsplash.com/photo-1603991482950-796833f0dd87?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" }
            ];

            React.useEffect(() => {
                try {
                    const canvas = canvasRef.current;
                    if (!canvas) return;
                    const ctx = canvas.getContext('2d');
                    if (!ctx) return;

                    const drawCocktail = () => {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        const glassHeight = 200;
                        const layerHeight = glassHeight / Math.max(1, cocktail.length);
                        cocktail.forEach((ing, idx) => {
                            ctx.beginPath();
                            ctx.rect(50, 50 + idx * layerHeight, 200, layerHeight);
                            ctx.fillStyle = ing.color;
                            ctx.fill();
                            ctx.strokeStyle = 'black';
                            ctx.stroke();
                        });

                        // Draw glass outline
                        ctx.beginPath();
                        ctx.moveTo(50, 50);
                        ctx.lineTo(100, 250);
                        ctx.lineTo(200, 250);
                        ctx.lineTo(250, 50);
                        ctx.closePath();
                        ctx.strokeStyle = 'white';
                        ctx.stroke();
                    };

                    drawCocktail();
                } catch (error) {
                    console.error('CocktailMixer Error:', error);
                }
            }, [cocktail]);

            const addIngredient = (ingredient) => {
                if (cocktail.length < 4) {
                    setCocktail([...cocktail, ingredient]);
                    // Play pour sound
                    if (window.sounds) {
                        window.sounds.pour.play();
                    }
                }
            };

            const shareCocktail = () => {
                const cocktailName = cocktail.map(i => i.name).join(' + ');
                alert(`¡Has creado un cóctel: ${cocktailName}! Comparte en Instagram Stories.`);
            };

            return (
                <section id="mixer" className="py-24 text-center bg-gray-900 light:bg-gray-100 animate-section">
                    <h2 className="text-4xl md:text-5xl font-bold mb-8 text-amber-600 font-['Dancing Script']">Crea Tu Cóctel 🍸</h2>
                    <p className="text-lg md:text-xl max-w-3xl mx-auto mb-10 light-text">
                        Mezcla ingredientes y crea tu propio cóctel personalizado. ¡Comparte tu obra maestra!
                    </p>
                    <div className="flex flex-col md:flex-row justify-center items-center gap-10">
                        <canvas
                            ref={canvasRef}
                            width={300}
                            height={300}
                            className="game-canvas"
                            aria-label="Crea tu cóctel interactivo"
                        ></canvas>
                        <div className="flex flex-col gap-4">
                            <h3 className="text-xl font-semibold light-text">Ingredientes:</h3>
                            {ingredients.map((ing, idx) => (
                                <button
                                    key={ing.name}
                                    onClick={() => addIngredient(ing)}
                                    className="flex items-center gap-2 bg-amber-200 text-gray-900 px-4 py-2 rounded-full font-semibold transition hover:bg-amber-300"
                                    aria-label={Añade ${ing.name} al cóctel}
                                >
                                    <img src={ing.img} alt={ing.name} className="w-8 h-8 object-cover rounded" loading="lazy" />
                                    {ing.name}
                                </button>
                            ))}
                            {cocktail.length > 0 && (
                                <button
                                    onClick={shareCocktail}
                                    className="bg-blue-500 text-white px-4 py-2 rounded-full font-semibold mt-4 hover:bg-blue-600 transition"
                                    aria-label="Compartir cóctel"
                                >
                                    Compartir Cóctel
                                </button>
                            )}
                        </div>
                    </div>
                </section>
            );
        }

        function EventCalendar() {
            const events = [
                { date: "2023-10-20", title: "Noche de Flamenco", time: "21:00", description: "Vive la pasión del flamenco en vivo." },
                { date: "2023-10-25", title: "DJ Night", time: "22:00", description: "Baila con los mejores ritmos electrónicos." },
                { date: "2023-10-30", title: "Taller de Cócteles", time: "19:00", description: "Aprende a preparar cócteles con nuestros mixólogos." }
            ];

            return (
                <section id="events" className="py-24 text-center bg-gray-800 light:bg-gray-200 animate-section">
                    <h2 className="text-4xl md:text-5xl font-bold mb-8 text-amber-600 font-['Dancing Script']">Próximos Eventos 🎤</h2>
                    <p className="text-lg md:text-xl max-w-3xl mx-auto mb-10 light-text">
                        No te pierdas nuestras noches temáticas y eventos especiales en Envidia Copas.
                    </p>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto">
                        {events.map((event) => (
                            <div key={event.date} className="bg-gray-700 light:bg-white rounded-xl p-6 shadow-lg">
                                <h3 className="text-xl font-semibold text-amber-500 light:text-amber-600">{event.title}</h3>
                                <p className="text-lg light-text">{event.date} a las {event.time}</p>
                                <p className="text-light-text">{event.description}</p>
                            </div>
                        ))}
                    </div>
                </section>
            );
        }

        function ReservationForm({ isOpen, onClose }) {
            const [formData, setFormData] = React.useState({
                name: "",
                email: "",
                phone: "",
                date: "",
                time: "",
                guests: 1
            });
            const [submitted, setSubmitted] = React.useState(false);

            const handleChange = (e) => {
                setFormData({ ...formData, [e.target.name]: e.target.value });
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.name && formData.email && formData.phone && formData.date && formData.time && formData.guests > 0) {
                    setSubmitted(true);
                    setTimeout(() => {
                        setSubmitted(false);
                        onClose();
                        setFormData({
                            name: "",
                            email: "",
                            phone: "",
                            date: "",
                            time: "",
                            guests: 1
                        });
                    }, 3000);
                } else {
                    alert("Por favor, completa todos los campos.");
                }
            };

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
                    <div className="bg-white text-gray-900 rounded-xl p-10 w-full max-w-lg reservation-form">
                        {submitted ? (
                            <div className="text-center">
                                <h3 className="text-2xl font-bold text-amber-600 mb-4">¡Reserva Confirmada!</h3>
                                <p>Gracias por reservar en Envidia Copas. Te esperamos.</p>
                            </div>
                        ) : (
                            <div>
                                <h2 className="text-2xl font-bold text-amber-600 mb-4">Reserva tu Mesa</h2>}
                                <div onSubmit={handleSubmit}>
                                    <div className="mb-4">
                                        <label className="block text-sm font-medium mb-1">Nombre</label>
                                        <input
                                            type="text"
                                            name="name"
                                            value={formData.name}
                                            onChange={handleChange}
                                            className="w-full p-2 border border-gray-300 rounded-lg"
                                            required
                                            aria-label="Nombre completo"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label className="block text-sm font-medium mb-1">Correo Electrónico</label>
                                        <input
                                            type="email"
                                            name="email"
                                            value={formData.email}
                                            onChange={handleChange}
                                            className="w-full p-2 border border-gray-300 rounded-lg"
                                            required}
                                            aria-label="Correo electrónico"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label className="block text-sm font-medium mb-1">Teléfono</label>
                                        <input
                                            type="tel"
                                            name="phone"
                                            value={formData.phone}
                                            onChange={handleChange}
                                            className="w-full p-2 border border-gray-300 rounded-lg"
                                            required
                                            aria-label="Número de teléfono"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label className="block text-sm font-medium mb-1">Fecha</label>
                                        <input
                                            type="date"
                                            name="date"
                                            value={formData.date}
                                            onChange={handleChange}
                                            className="w-full p-2 border border-gray-300 rounded-lg"
                                            required
                                            aria-label="Fecha de la reserva"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label className="block text-sm font-medium mb-1">Hora</label>
                                        <select name="time" value={formData.time} onChange={handleChange} className="w-full p-2 border border-gray-300 rounded-lg" required aria-label="Hora de la reserva">
                                            <option value="">Selecciona una hora</option>
                                            <option value="16:00">16:00</option>
                                            <option value="17:00">17:00</option>
                                            <option value="18:00">18:00</option>
                                            <option value="19:00">19:00</option>
                                            <option value="20:00">20:00</option>
                                            <option value="21:00">21:00</option>
                                            <option value="22:00">22:00</option>
                                        </select>
                                    </div>
                                    <div className="mb-4">
                                        <label className="block text-sm font-medium mb-1">Número de Personas</label>
                                        <input
                                            type="number"
                                            name="guests"
                                            value={formData.guests}
                                            onChange={handleChange}
                                            min="1"
                                            max="20"
                                            className="w-full p-2 border border-gray-300 rounded-lg"
                                            required
                                            aria-label="Número de personas"
                                        />
                                    </div>
                                    <div className="flex justify-end gap-4">
                                        <button
                                            type="button"
                                            onClick={onClose}
                                            className="px-4 py-2 bg-gray-300 text-gray-900 rounded-lg hover:bg-gray-400 transition"
                                            aria-label="Cancelar reserva"
                                        >
                                            Cancelar
                                        </button>
                                        <button
                                            type="submit"
                                            className="px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition"
                                            aria-label="Enviar reserva"
                                        >
                                            Reservar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function GameCanvas() {
            const canvasRef = React.useRef(null);
            const [score, setScore] = React.useState(0);
            const [leaderboard, setLeaderboard] = React.useState(JSON.parse(localStorage.getItem('leaderboard')) || []);

            React.useEffect(() => {
                try {
                    const canvas = canvasRef.current;
                    if (!canvas) return;
                    const ctx = canvas.getContext('2d');
                    if (!ctx) return;

                    let dart = { x: 50, y: 250, vx: 5, vy: -5, radius: 10 };
                    let target = { x: 350, y: 150, radius: 50 };
                    let isPlaying = false;
                    let animationFrame;

                    const draw = () => {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.beginPath();
                        ctx.arc(target.x, target.y, target.radius, 0, Math.PI * 2);
                        ctx.fillStyle = '#dc2626';
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(target.x, target.y, target.radius * 0.3, 0, Math.PI * 2);
                        ctx.fillStyle = '#ffffff';
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(dart.x, dart.y, dart.radius, 0, Math.PI * 2);
                        ctx.fillStyle = '#f59f00';
                        ctx.fill();

                        if (isPlaying) {
                            dart.x += dart.vx;
                            dart.y += dart.vy;
                            dart.vy += 0.1;
                            if (dart.x > canvas.width || dart.y > canvas.height || dart.x < 0 || dart.y < 0) {
                                isPlaying = false;
                                dart.x = 50;
                                dart.y = 250;
                                dart.vx = 5;
                                dart.vy = -5;
                                const distance = Math.hypot(dart.x - target.x, dart.y - target.y);
                                if (distance < target.radius) {
                                    setScore(prev => {
                                        const newScore = prev + 10;
                                        if (window.sounds) {
                                            window.sounds.cheer.play();
                                        }
                                        if (newScore > (leaderboard[0]?.score || 0)) {
                                            const newLeaderboard = [{ name: 'Jugador', score: newScore }, ...leaderboard.slice(0, 4)];
                                            setLeaderboard(newLeaderboard);
                                            localStorage.setItem('leaderboard', JSON.stringify(newLeaderboard));
                                        }
                                        return newScore;
                                    });
                                }
                            }
                        }

                        animationFrame = requestAnimationFrame(draw);
                    };

                    draw();

                    const handleClick = () => {
                        if (!isPlaying) {
                            isPlaying = true;
                            if (window.sounds) {
                                window.sounds.dart.play();
                            }
                        }
                    };

                    canvas.addEventListener('click', handleClick);

                    return () => {
                        canvas.removeEventListener('click', handleClick);
                        cancelAnimationFrame(animationFrame);
                    };
                } catch (error) {
                    console.error('GameCanvas Error:', error);
                }
            }, [leaderboard]);

            return (
                <div className="text-center">
                    <canvas
                        ref={canvasRef}
                        width={400}
                        height={300}
                        className="game-canvas mx-auto"
                        aria-label="Juego interactivo de dardos"
                    ></canvas>
                    <p className="text-lg mt-4 light-text">Puntuación: {score}</p>
                    <p className="text-sm text-gray-400 light:text-gray-600">Haz clic para lanzar un dardo</p>
                    <div className="mt-4">
                        <h3 className="text-xl font-semibold text-amber-400 light:text-amber-600">Tabla de Clasificación</h3>
                        <ul className="list-none">
                            {leaderboard.map((entry, idx) => (
                                <li key={idx} className="text-light-text">{entry.name}: {entry.score} puntos</li>
                            ))}
                        </ul>
                    </div>
                </div>
